{
  "_id": "sockjs-client@0.0.0-unreleasable",
  "_location": "/shoe/sockjs-client",
  "_phantomChildren": {},
  "_requiredBy": [
    "/shoe"
  ],
  "_shrinkwrap": null,
  "author": {
    "name": "Marek Majkowski"
  },
  "bugs": {
    "url": "https://github.com/sockjs/sockjs-client/issues"
  },
  "dependencies": {},
  "description": "SockJS-client is a browser JavaScript library that provides a WebSocket-like object. SockJS gives you a coherent, cross-browser, Javascript API which creates a low latency, full duplex, cross-domain communication channel between the browser and the web server.",
  "devDependencies": {
    "coffee-script": "1.2.x",
    "node-static": "0.5.9",
    "optparse": "1.0.3",
    "uglify-js": "1.2.5"
  },
  "homepage": "http://sockjs.org",
  "keywords": [
    "websockets",
    "websocket"
  ],
  "main": "sockjs.js",
  "name": "sockjs-client",
  "optionalDependencies": {},
  "readme": "SockJS family:\n\n  * [SockJS-client](https://github.com/sockjs/sockjs-client) JavaScript client library\n  * [SockJS-node](https://github.com/sockjs/sockjs-node) Node.js server\n  * [SockJS-erlang](https://github.com/sockjs/sockjs-erlang) Erlang server\n  * [SockJS-lua](https://github.com/luvit/sockjs-luvit) Lua/Luvit server\n  * [SockJS-tornado](https://github.com/MrJoes/sockjs-tornado) Python/Tornado server\n  * [vert.x](https://github.com/purplefox/vert.x) Java/vert.x server\n\nWork in progress:\n\n  * [SockJS-ruby](https://github.com/sockjs/sockjs-ruby)\n  * [SockJS-netty](https://github.com/cgbystrom/sockjs-netty)\n  * [SockJS-gevent](https://github.com/sdiehl/sockjs-gevent)\n  * [pyramid-SockJS](https://github.com/fafhrd91/pyramid_sockjs)\n  * [wildcloud-websockets](https://github.com/wildcloud/wildcloud-websockets)\n  * [SockJS-cyclone](https://github.com/flaviogrossi/sockjs-cyclone)\n  * [SockJS-twisted](https://github.com/Fugiman/sockjs-twisted/)\n\n\nSockJS-client\n=============\n\nSockJS is a browser JavaScript library that provides a WebSocket-like\nobject. SockJS gives you a coherent, cross-browser, Javascript API\nwhich creates a low latency, full duplex, cross-domain communication\nchannel between the browser and the web server.\n\nUnder the hood SockJS tries to use native WebSockets first. If that\nfails it can use a variety of browser-specific transport protocols and\npresents them through WebSocket-like abstractions.\n\nSockJS is intended to work for all modern browsers and in environments\nwhich don't support WebSocket protcol, for example behind restrictive\ncorporate proxies.\n\nSockJS-client does require a server counterpart:\n\n * [SockJS-node](https://github.com/sockjs/sockjs-node) is a SockJS\n   server for Node.js.\n\n\nPhilosophy:\n\n * The API should follow\n   [HTML5 Websockets API](http://dev.w3.org/html5/websockets/) as\n   closely as possible.\n * All the transports must support cross domain connections out of the\n   box. It's possible and recommended to host SockJS server on\n   different server than your main web site.\n * There is a support for at least one streaming protocol for every\n   major browser.\n * Streaming transports should work cross-domain and\n   should support cookies (for cookie-based sticky sessions).\n * Polling transports are be used as a fallback for old browsers and\n   hosts behind restrictive proxies.\n * Connection establishment should be fast and lightweight.\n * No Flash inside (no need to open port 843 - which doesn't work\n   through proxies, no need to host 'crossdomain.xml', no need\n   [to wait for 3 seconds](https://github.com/gimite/web-socket-js/issues/49)\n   in order to detect problems)\n\n\nSubscribe to\n[SockJS mailing list](https://groups.google.com/forum/#!forum/sockjs) for\ndiscussions and support.\n\n\nLive QUnit tests and smoke tests\n--------------------------------\n\nSockJS comes with some QUnit tests and a few smoke tests (using\n[SockJS-node](https://github.com/sockjs/sockjs-client) on the server\nside). At the moment they are deployed in few places:\n\n * http://sockjs.popcnt.org/ and https://sockjs.popcnt.org/ (hosted in Europe)\n * http://sockjs.cloudfoundry.com/ (CloudFoundry, websockets disabled, loadbalanced)\n * https://sockjs.cloudfoundry.com/ (CloudFoundry SSL, websockets disabled, loadbalanced)\n\n\nExample\n-------\n\nSockJS mimics [WebSockets API](http://dev.w3.org/html5/websockets/)\nbut instead of `WebSocket` there is a `SockJS` Javascript object.\n\nFirst, you need to load SockJS JavaScript library, for example you can\nput that in your http head:\n\n    <script src=\"http://cdn.sockjs.org/sockjs-0.3.min.js\">\n      </script>\n\nAfter the script is loaded you can establish a connection with the\nSockJS server. Here's a simple example:\n\n```javascript\n<script>\n   var sock = new SockJS('http://mydomain.com/my_prefix');\n   sock.onopen = function() {\n       console.log('open');\n   };\n   sock.onmessage = function(e) {\n       console.log('message', e.data);\n   };\n   sock.onclose = function() {\n       console.log('close');\n   };\n</script>\n```\n\nSockJS-client API\n-----------------\n\n### SockJS class\n\nSimilar to 'WebSocket' class 'SockJS' constructor takes one, or more arguments:\n\n```javascript\nvar sockjs = new SockJS(url, _reserved, options);\n```\n\nWhere `options` is a hash which can contain:\n\n *  **debug (boolean)**\n\n    Print some debugging messages using 'console.log'.\n\n *  **devel (boolean)**\n\n    Development mode. Currently setting it disables caching of the\n    'iframe.html'.\n\n *  **protocols_whitelist (list of strings)**\n\n    Sometimes it is useful to disable some fallback protocols. This\n    option allows you to supply a list protocols that may be used by\n    SockJS. By default all available protocols will be used, which is\n    equivalent to supplying: \"['websocket', 'xdr-streaming', 'xhr-streaming',\n    'iframe-eventsource', 'iframe-htmlfile', 'xdr-polling', 'xhr-polling',\n    'iframe-xhr-polling', 'jsonp-polling']\"\n\n\nAlthough the 'SockJS' object tries to emulate the 'WebSocket'\nbehaviour, it's impossible to support all features. One of the\nimportant SockJS limitations is the fact that you're not allowed to\nopen more than one SockJS connection to a single domain at a time.\nThis limitation is caused by a in-browser limit of outgoing\nconnections - usually [browsers don't allow opening more than two\noutgoing connections to a single domain](http://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser). Single SockJS session\nrequires those two connections - one for downloading data, other for\nsending messages.  Opening second SockJS session at the same time\nwould most probably block and can result in both sessions timing out.\n\nOpening more than one SockJS connection at a time is generally a\nbad practice. If you absolutely must do it, you can use\nmutliple subdomains, using different subdomain for every\nSockJS connection.\n\nSupported transports, by browser (html served from http:// or https://)\n-----------------------------------------------------------------------\n\n_Browser_       | _Websockets_     | _Streaming_ | _Polling_\n----------------|------------------|-------------|-----------\nIE 6, 7         | no               | no          | jsonp-polling\nIE 8, 9 (cookies=no) |    no       | xdr-streaming &dagger; | xdr-polling &dagger;\nIE 8, 9 (cookies=yes)|    no       | iframe-htmlfile | iframe-xhr-polling\nIE 10           | rfc6455          | xhr-streaming   | xhr-polling\nChrome 6-13     | hixie-76         | xhr-streaming   | xhr-polling\nChrome 14+      | hybi-10 / rfc6455| xhr-streaming   | xhr-polling\nFirefox <10     | no &Dagger;      | xhr-streaming   | xhr-polling\nFirefox 10+     | hybi-10 / rfc6455| xhr-streaming   | xhr-polling\nSafari 5        | hixie-76         | xhr-streaming   | xhr-polling\nOpera 10.70+    | no &Dagger;      | iframe-eventsource | iframe-xhr-polling\nKonqueror       | no               | no          | jsonp-polling\n\n\n * **&dagger;**: IE 8+ supports [XDomainRequest][^9], which is\n    esentially a modified AJAX/XHR that can do requests across\n    domains. But unfortunately it doesn't send any cookies, which\n    makes it inaproppriate for deployments when the load balancer uses\n    JSESSIONID cookie to do sticky sessions.\n\n * **&Dagger;**: Firefox 4.0 and Opera 11.00 and shipped with disabled\n     Websockets \"hixie-76\". They can still be enabled by manually\n     changing a browser setting.\n\nSupported transports, by browser (html served from file://)\n-----------------------------------------------------------\n\nSometimes you may want to serve your html from \"file://\" address - for\ndevelopment or if you're using PhoneGap or similar technologies. But\ndue to the Cross Origin Policy files served from \"file://\" have no\nOrigin, and that means some of SockJS transports won't work. For this\nreason the SockJS protocol table is different than usually, major\ndifferences are:\n\n_Browser_       | _Websockets_  | _Streaming_        | _Polling_\n----------------|---------------|--------------------|-----------\nIE 8, 9         | same as above | iframe-htmlfile    | iframe-xhr-polling\nOther           | same as above | iframe-eventsource | iframe-xhr-polling\n\nSupported transports, by name\n-----------------------------\n\n_Transport_          | _References_\n---------------------|---------------\nwebsocket (rfc6455)  | [rfc 6455][^10]\nwebsocket (hixie-76) | [draft-hixie-thewebsocketprotocol-76][^1]\nwebsocket (hybi-10)  | [draft-ietf-hybi-thewebsocketprotocol-10][^2]\nxhr-streaming        | Transport using [Cross domain XHR][^5] [streaming][^7] capability (readyState=3).\nxdr-streaming        | Transport using [XDomainRequest][^9] [streaming][^7] capability (readyState=3).\niframe-eventsource   | [EventSource][^4] used from an [iframe via postMessage][^3].\niframe-htmlfile      | [HtmlFile][^8] used from an [iframe via postMessage][^3].\nxhr-polling          | Long-polling using [cross domain XHR][^5].\nxdr-polling          | Long-polling using [XDomainRequest][^9].\niframe-xhr-polling   | Long-polling using normal AJAX from an [iframe via postMessage][^3].\njsonp-polling        | Slow and old fashioned [JSONP polling][^6]. This transport will show \"busy indicator\" (aka: \"spinning wheel\") when sending data.\n\n\n[^1]: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76\n[^2]: http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-10\n[^3]: https://developer.mozilla.org/en/DOM/window.postMessage\n[^4]: http://dev.w3.org/html5/eventsource/\n[^5]: https://secure.wikimedia.org/wikipedia/en/wiki/XMLHttpRequest#Cross-domain_requests\n[^6]: https://secure.wikimedia.org/wikipedia/en/wiki/JSONP\n[^7]: http://www.debugtheweb.com/test/teststreaming.aspx\n[^8]: http://cometdaily.com/2007/11/18/ie-activexhtmlfile-transport-part-ii/\n[^9]: http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n[^10]: http://www.rfc-editor.org/rfc/rfc6455.txt\n\n\nConnecting to SockJS without the client\n---------------------------------------\n\nAlthough the main point of SockJS it to enable browser-to-server\nconnectivity, it is possible to connect to SockJS from an external\napplication. Any SockJS server complying with 0.3 protocol does\nsupport a raw WebSocket url. The raw WebSocket url for the test server\nlooks like:\n\n * ws://localhost:8081/echo/websocket\n\nYou can connect any WebSocket RFC 6455 compliant WebSocket client to\nthis url. This can be a command line client, external application,\nthird party code or even a browser (though I don't know why you would\nwant to do so).\n\n\nDeployment\n----------\n\nIn order to utilize best performance you should use the SockJS-client\nreleases hosted on SockJS CDN. You should use a version of sockjs-client\nthat supports the protocol used by your server. For example:\n\n    <script src=\"http://cdn.sockjs.org/sockjs-0.3.min.js\">\n      </script>\n\nA list of files hosted on a CDN is available here: http://sockjs.github.com/sockjs-client/ .\n\nYou can also use or CDN via https (using Cloud Front domain name):\n\n    <script src=\"https://d1fxtkz8shb9d2.cloudfront.net/sockjs-0.3.js\">\n      </script>\n\nFor server-side deployment tricks, especially about load balancing and\nsession stickiness, take a look at the\n[SockJS-node readme](https://github.com/sockjs/sockjs-node#readme).\n\n\nDevelopment and testing\n-----------------------\n\nSockJS-client needs [Node.js](http://nodejs.org/) for running a test\nserver and JavaScript minification. If you want to work on\nSockJS-client source code, check out the git repo and follow this\nsteps:\n\n    cd sockjs-client\n    npm install --dev\n\nTo generate JavaScript run:\n\n    make sockjs.js\n\nTo generate minified JavaScript run:\n\n    make sockjs.min.js\n\n(To generate both run `make build`.)\n\n\n### Testing\n\nOnce you compiled SockJS-client you may want to check if your changes\npass all the tests. To run the tests you need a server that can answer\nvarious SockJS requests. A common way is to use `SockJS-node` test\nserver for that. To run it (by default it will be listening on port 8081):\n\n    cd sockjs-node\n    npm install --dev\n    make build\n    make test_server\n\nAt this point you're ready to run a SockJS-client server that will\nserver your freshly compiled JavaScript and various static http and\njavscript files (by default it will run on port 8080).\n\n    cd sockjs-client\n    make test\n\nAt that point you should have two web servers running: sockjs-node on\n8081 and sockjs-client on 8080. When you open the browser on\n[http://localhost:8080/](http://localhost:8080/) you should be able\nrun the QUnit tests against your sockjs-node server.\n\nIf you look at your browser console you will see warnings like that:\n\n    Incompatibile SockJS! Main site uses: \"a\", the iframe: \"b\".\n\nThis is due to a fact that SockJS-node test server is using compiled\njavascript from CDN, rather than your freshly compiled version. To fix\nthat you must amend `sockjs_url` that is used by SockJS-node test\nserver. Edit the [`config.js`](https://github.com/sockjs/sockjs-node/blob/master/examples/test_server/config.js) file:\n\n    vim sockjs-node/examples/test_server/config.js\n\nAnd replace `sockjs_url` setting which by default points to CDN:\n\n    sockjs_url: 'http://cdn.sockjs.org/sockjs-0.3.min.js',\n\nto a freshly compiled sockjs, for example:\n\n    sockjs_url: 'http://localhost:8080/lib/sockjs.js',\n\n\nAlso, if you want to run tests agains SockJS server not running on\n`localhost:8081` you may want to edit the\n[`tests/config.js`](https://github.com/sockjs/sockjs-client/blob/master/tests/config.js)\nfile.\n\nAdditionally, if you're doing more serious development consider using\n`make serve`, which will automatically reload the server when you\nmodify the source code.\n\n\nBrowser Quirks\n--------------\n\nThere are various browser quirks which we don't intend to address:\n\n * Pressing ESC in Firefox closes SockJS connection. For a workaround\n   and discussion see [#18](https://github.com/sockjs/sockjs-client/issues/18).\n * Jsonp-polling transport will show a \"spinning wheel\" (aka. \"busy indicator\")\n   when sending data.\n * You can't open more than one SockJS connection to one domain at the\n   same time due to [the browsers limit of consurrent connections](http://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser)\n   (this limit is not counting native websockets connections).\n * Although SockJS is trying to escape any strange Unicode characters\n   (even invalid ones - [like surrogates \\xD800-\\xDBFF](http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates) or [\\xFFFE and \\xFFFF](https://en.wikipedia.org/wiki/Unicode#Character_General_Category))\n   it's advisable to use only valid characters. Using invalid\n   characters is a bit slower, and may not work with SockJS servers\n   that have a proper Unicode support.\n * Having a global function called `onmessage` or such is probably a\n   bad idea, as it could be called by the built-in `postMessage` API.\n * From SockJS point of view there is nothing special about\n   SSL/HTTPS. Connecting between unencrypted and encrypted sites\n   should work just fine.\n * Although SockJS does best to support both prefix and cookie based\n   sticky sessions, the latter may not work well cross-domain with\n   browsers that don't accept third-party cookies by default (Safari).\n   In order to get around this make sure you're connecting to sockjs\n   from the same parent domain as the main site. For example\n   'sockjs.a.com' is able to set cookies if you're connecting from\n   'www.a.com' or 'a.com'.\n * Trying to connect from secure \"https://\" to insecure \"http://\" is\n   not good idea. The other way around should be fine.\n * Long polling is known to cause problems on Heroku, but\n   [workaround for SockJS is available](https://github.com/sockjs/sockjs-node/issues/57#issuecomment-5242187).\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/sockjs/sockjs-client.git"
  },
  "version": "0.0.0-unreleasable"
}
